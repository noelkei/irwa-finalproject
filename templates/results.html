{% extends "base.html" %}
{% block page_title %}{{ page_title }}{% endblock %}
{% block content %}
    <p>Found <strong>{{ results_count }}</strong> results for "{{ query }}"</p>
    <hr>

    {% if rag_response %}
    <div class="mb-4 p-3" style="border: 1px solid #ccc; border-radius: 5px; background-color: #f9f9f9;">
        <h5>AI-Generated Summary:</h5>
        <p>{{ rag_response }}</p>
    </div>
    {% endif %}

    {% for item in results_list %}
    <div class="pb-3">
        <div class="doc-title">
            <a href="{{ url_for('doc_details', pid=item.pid, search_id=search_id, rank=loop.index) }}">
                {{ item.title }}
            </a>
        </div>
        <div class="doc-desc">
            {{ item.description[:200] }}{% if item.description and item.description|length > 200 %}...{% endif %}
        </div>
    </div>
    <hr>
    {% endfor %}
{% endblock %}
